(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vault/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"16a5":function(e,t,n){},"19d7":function(e,t,n){"use strict";var r=n("62fc"),a=n.n(r);a.a},"3fbd":function(e,t,n){},4738:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{id:"app",fluid:""},on:{mousemove:e.onUserInteraction}},[n("router-view")],1)},i=[],s=(n("f9e3"),n("2dd8"),n("1bbb")),o={name:"app",created:function(){this.autoLogoutCounter()},updated:function(){this.autoLogoutCounter()},data:function(){return{currentRoute:"",interval:null,seconds:0}},methods:{autoLogoutCounter:function(){var e=this;this.currentRoute=this.$router.history.current.path,this.interval||"/login"===this.currentRoute||(this.interval=setInterval((function(){e.seconds+=1}),1e3))},onUserInteraction:function(){this.seconds=0}},watch:{seconds:function(e){120===e&&"/"!==this.currentRoute&&(window.clearInterval(this.interval),this.interval=null,this.seconds=0,sessionStorage.removeItem("vault"),this.$router.push("/login"))}},components:{BContainer:s["a"]}},l=o,c=(n("5c0b"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,null,null),d=u.exports,p=(n("96cf"),n("3b8d")),f=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"layout-container",attrs:{"align-v":"center","align-h":"center"}},[n("CoreLayout",[n("router-view")],1)],1)},h=[],b=n("a15b"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"login"===e.currentRoute?n("b-col",{attrs:{md:"8",lg:"6",xl:"5"}},[n("b-card",{attrs:{"no-body":""}},[e._t("default")],2)],1):n("b-col",{attrs:{md:"11",lg:"10",xl:"7"}},[n("b-card",{attrs:{"no-body":""}},[e._t("default")],2)],1)},g=[],C=(n("7f7f"),n("205f")),w=n("b28b"),y={created:function(){this.setCurrentRoute(this.$route)},data:function(){return{currentRoute:""}},watch:{$route:function(e){this.setCurrentRoute(e)}},methods:{setCurrentRoute:function(e){this.currentRoute=e.name}},components:{BCard:C["a"],BCol:w["a"]}},O=y,_=Object(c["a"])(O,v,g,!1,null,null,null),S=_.exports,j={components:{BRow:b["a"],CoreLayout:S}},k=j,x=(n("c109"),Object(c["a"])(k,m,h,!1,null,null,null)),E=x.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-tabs",{attrs:{card:"",justified:""}},[n("b-tab",{attrs:{title:"Login",active:""}},[n("LoginForm",{attrs:{error:e.userState.errorLogin,loading:e.userState.loadingLogin},on:{onSubmitLogin:e.onSubmitLogin}})],1),n("b-tab",{attrs:{title:"Sign Up"}},[n("SignUpForm",{attrs:{error:e.userState.errorSignup,loading:e.userState.loadingSignup},on:{onSubmitSignUp:e.onSubmitSignUp}})],1)],1)],1)},P=[],D=n("f902"),N=n("6190"),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{id:"input-group-email",label:"Email","label-for":"input-email"}},[n("b-form-input",{attrs:{id:"input-email",type:"email",required:"",placeholder:"Enter email",readonly:e.readonly},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("b-form-group",{attrs:{id:"input-group-pass",label:"Password","label-for":"input-pass"}},[n("b-form-input",{attrs:{id:"input-pass",type:"password",required:"",placeholder:"Enter your password",readonly:e.readonly},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),this.masterp?e._e():n("b-form-group",{attrs:{id:"input-group-masterp-login",label:"Master Password","label-for":"input-masterp-login"}},[n("b-form-input",{attrs:{id:"input-masterp-login",type:"password",required:!this.masterp,placeholder:"Enter your Master Password",readonly:e.readonly},model:{value:e.form.masterp,callback:function(t){e.$set(e.form,"masterp",t)},expression:"form.masterp"}})],1),n("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[e._v("\n    "+e._s(e.error)+"\n  ")]),n("b-button",{attrs:{block:"",type:"submit",variant:"primary",disabled:e.loading}},[e.loading?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("span",[e._v("Log In")])]),n("b-button",{attrs:{block:"",type:"reset",variant:"default",size:"sm"}},[e._v("Reset")])],1)},$=[],L=n("cff8"),R=n.n(L),T=n("1947"),A=n("11de"),U=n("4797"),z=n("8226"),I=n("5fda"),q={created:function(){this.masterp=R()("masterp")},mounted:function(){var e=this;setTimeout((function(){e.readonly=!1}),0)},data:function(){return{form:{email:"",password:"",masterp:""},showAlert:!!this.error,readonly:!0,masterp:null}},props:{error:{type:[String,Boolean]},loading:{type:Boolean}},watch:{error:function(e){e&&(this.showAlert=!0)}},methods:{onSubmit:function(){this.form.masterp=this.masterp?this.masterp:this.form.masterp,this.$emit("onSubmitLogin",this.form)}},components:{BButton:T["a"],BForm:A["a"],BFormInput:U["a"],BFormGroup:z["a"],BAlert:I["a"]}},M=q,J=Object(c["a"])(M,F,$,!1,null,null,null),Y=J.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{id:"input-group-email-signup",label:"Email","label-for":"input-email-signup"}},[n("b-form-input",{attrs:{id:"input-email-signup",type:"email",required:"",placeholder:"Enter email",readonly:e.readonly},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("b-form-group",{attrs:{id:"input-group-pass-signup",label:"Password","label-for":"input-pass-signup"}},[n("b-form-input",{attrs:{id:"input-pass-signup",type:"password",required:"",placeholder:"Enter your password",readonly:e.readonly,state:e.validPass},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("b-form-group",{attrs:{id:"input-group-confirm-pass",label:"Confirm Password","label-for":"input-confirm-pass"}},[n("b-form-input",{attrs:{id:"input-confirm-pass",type:"password",required:"",placeholder:"Confirm your password",readonly:e.readonly,state:e.validPass},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}})],1),n("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[e._v("\n    "+e._s(e.error)+"\n  ")]),n("b-button",{attrs:{block:"",type:"submit",variant:"primary",disabled:e.loading||!e.passMatch}},[e.loading?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("span",[e._v("Sign Up")])]),n("b-button",{attrs:{block:"",type:"reset",variant:"default",size:"sm"}},[e._v("Reset")])],1)},H=[],G={mounted:function(){var e=this;setTimeout((function(){e.readonly=!1}),0)},data:function(){return{form:{email:"",password:""},showAlert:!!this.error,readonly:!0,validPass:null}},props:{error:{type:[String,Boolean]},loading:{type:Boolean}},computed:{passMatch:function(){return this.form.password===this.form.confirmPassword}},watch:{error:function(e){e&&(this.showAlert=!0)}},methods:{onSubmit:function(){this.$emit("onSubmitSignUp",this.form)}},components:{BButton:T["a"],BForm:A["a"],BFormInput:U["a"],BFormGroup:z["a"],BAlert:I["a"]}},K=G,Q=Object(c["a"])(K,V,H,!1,null,null,null),W=Q.exports,X=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),Z=n("11c1"),ee=n.n(Z),te=n("bc3a"),ne=n.n(te),re="https://secretvault-api.herokuapp.com",ae=function(e){var t=e.email,n=e.password,r=e.masterp;return ne.a.post("".concat(re,"/users/login"),{email:t,password:n,masterp:r})},ie=function(e){var t=e.email,n=e.password,r=e.masterp;return ne.a.post("".concat(re,"/users"),{email:t,password:n,masterp:r})},se=function(e){return ne.a.get("".concat(re,"/users/me"),{headers:{Authorization:"Bearer ".concat(e)}})};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){Object(X["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce={state:{user:{name:""},errorLogin:"",loadingLogin:!1,errorSignup:"",loadingSignup:!1},fetchUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",se(t).then((function(e){n.setUser({user:e.data,token:t})})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),loginUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setErrorLogin(!1),this.setLoadingLogin(!0),e.prev=2,e.next=5,ae(t);case 5:n=e.sent,this.setUser(n.data),R()("masterp",t.masterp),Kt.push("/dashboard"),this.setErrorLogin(!1),e.next=16;break;case 12:throw e.prev=12,e.t0=e["catch"](2),this.setErrorLogin("Error Login In"),e.t0;case 16:return e.prev=16,this.setLoadingLogin(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,12,16,19]])})));function t(t){return e.apply(this,arguments)}return t}(),signupUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setErrorSignup(!1),this.setLoadingSignup(!0),r=ee()(),a={email:t,password:n,masterp:r},e.prev=4,e.next=7,ie(a);case 7:i=e.sent,R()("masterp",r),this.setUser(i.data),Kt.push("/dashboard"),this.setErrorSignup(!1),e.next=18;break;case 14:throw e.prev=14,e.t0=e["catch"](4),this.setErrorSignup("Error Signing Up!"),e.t0;case 18:return e.prev=18,this.setLoadingSignup(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[4,14,18,21]])})));function t(t,n){return e.apply(this,arguments)}return t}(),setUser:function(e){this.state.user=le({},e.user,{token:e.token}),sessionStorage.setItem("vault",JSON.stringify(e))},setLoadingLogin:function(e){this.state.loadingLogin=e},setErrorLogin:function(e){this.state.errorLogin=e},setLoadingSignup:function(e){this.state.loadingSignup=e},setErrorSignup:function(e){this.state.errorSignup=e}},ue={data:function(){return{userState:ce.state}},methods:{onSubmitLogin:function(e){ce.loginUser(e)},onSubmitSignUp:function(e){var t=e.email,n=e.password;ce.signupUser(t,n)}},components:{BTabs:D["a"],BTab:N["a"],LoginForm:Y,SignUpForm:W}},de=ue,pe=Object(c["a"])(de,B,P,!1,null,null,null),fe=pe.exports,me=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"layout-in dashboard px-3 py-3"},[r("b-container",{staticClass:"title-area"},[r("b-row",{attrs:{"align-h":"between","align-v":"center","no-gutters":""}},[r("b-col",{attrs:{cols:"auto"}},[t.openNewCredential?r("h4",{staticClass:"title"},[t._v("New Credential")]):r("h4",{staticClass:"title"},[t._v("Credentials")])]),r("b-col",{attrs:{cols:"auto"}},[t.openNewCredential?r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.new-credential",modifiers:{"new-credential":!0}}],attrs:{size:"sm"}},[r("i",{staticClass:"fas fa-times"}),t._v(" Cancel\n        ")]):r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.new-credential",modifiers:{"new-credential":!0}}],attrs:{variant:"primary",size:"sm"}},[r("i",{staticClass:"fas fa-plus"}),t._v(" New\n        ")])],1)],1)],1),r("b-collapse",{attrs:{id:"new-credential"},model:{value:t.openNewCredential,callback:function(e){t.openNewCredential=e},expression:"openNewCredential"}},[r("div",{staticClass:"dashboard__create-cred-container"},[r("transition",{attrs:{name:"fadeCred"}},[t.openNewCredential?r("CreateCredential",{on:{onCredCreated:function(){e.openNewCredential=!1},cancelCreate:function(){e.openNewCredential=!1}}}):t._e()],1)],1)]),t.loadingCredentials?r("div",[t._v("\n    Loading...\n  ")]):t.errorCredentials?r("div",[t._v("\n    "+t._s(t.errorCredentials)+"\n  ")]):r("div",[r("CredentialsList",{attrs:{credentials:t.credentials}})],1)],1)},he=[],be=n("75fc"),ve="https://secretvault-api.herokuapp.com",ge=function(e){return ne.a.get("".concat(ve,"/cred"),{headers:{Authorization:"Bearer ".concat(e)}})},Ce=function(e,t){return ne.a.post("".concat(ve,"/cred"),t,{headers:{Authorization:"Bearer ".concat(e)}})},we=function(e,t,n){return ne.a.patch("".concat(ve,"/cred/").concat(n),t,{headers:{Authorization:"Bearer ".concat(e)}})},ye=function(e,t){return ne.a.delete("".concat(ve,"/cred/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}})},Oe={id:"",processing:!1,error:!1},_e=r["a"].observable({state:{credentials:[],errorCredentials:"",loadingCredentials:!1,credentialStatus:Oe},getCredentials:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("vault"),n=t&&JSON.parse(t),r=n.token,this.setErrorCredentials(!1),this.setLoadingCredentials(!0),e.prev=4,e.next=7,ge(r);case 7:a=e.sent,this.setCredentials(a.data),this.setErrorCredentials(!1),e.next=16;break;case 12:throw e.prev=12,e.t0=e["catch"](4),this.setErrorCredentials("Error Loading Credentials"),e.t0;case 16:return e.prev=16,this.setLoadingCredentials(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[4,12,16,19]])})));function t(){return e.apply(this,arguments)}return t}(),createCredential:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("vault"),r=n&&JSON.parse(n),a=r.token,this.setErrorCredential(!1),this.setProcessingCredential(!0),e.prev=4,e.next=7,Ce(a,t);case 7:return i=e.sent,this.setCredentials([i.data].concat(Object(be["a"])(this.state.credentials))),this.setErrorCredential(!1),e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e["catch"](4),this.setErrorCredential("Error saving Credentials"),e.t0;case 17:return e.prev=17,this.setProcessingCredential(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,13,17,20]])})));function t(t){return e.apply(this,arguments)}return t}(),updateCredential:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=sessionStorage.getItem("vault"),a=r&&JSON.parse(r),i=a.token,this.setErrorCredential(!1),this.setProcessingCredential(!0,n),e.prev=4,e.next=7,we(i,t,n);case 7:return s=e.sent,o=this.state.credentials.filter((function(e){return e._id!==n})),this.setCredentials([s.data].concat(Object(be["a"])(o))),this.setErrorCredential(!1,n),e.abrupt("return",s);case 14:throw e.prev=14,e.t0=e["catch"](4),this.setErrorCredential("Error saving Credentials",n),e.t0;case 18:return e.prev=18,this.setProcessingCredential(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[4,14,18,21]])})));function t(t,n){return e.apply(this,arguments)}return t}(),deleteCredential:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("vault"),r=n&&JSON.parse(n),a=r.token,this.setErrorCredential(!1),this.setProcessingCredential(!0,t),e.prev=4,e.next=7,ye(a,t);case 7:i=this.state.credentials.filter((function(e){return e._id!==t})),this.setCredentials(i),this.setErrorCredential(!1,t),e.next=16;break;case 12:throw e.prev=12,e.t0=e["catch"](4),this.setErrorCredential("Error deleting Credentials",t),e.t0;case 16:return e.prev=16,this.setProcessingCredential(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[4,12,16,19]])})));function t(t){return e.apply(this,arguments)}return t}(),setCredentials:function(e){this.state.credentials=e},setLoadingCredentials:function(e){this.state.loadingCredentials=e},setErrorCredentials:function(e){this.state.errorCredentials=e},setProcessingCredential:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.state.credentialStatus={id:t,processing:e,error:!1}},setErrorCredential:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.state.credentialStatus={id:t,processing:!1,error:e}}}),Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"credential-list"},[n("b-container",{staticClass:"credential-list__header mb-2",attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{cols:"5"}},[e._v("Name")]),n("b-col",{attrs:{cols:"3"}},[e._v("Updated At")]),n("b-col",{attrs:{cols:"3"}},[e._v("Created At")]),n("b-col",{attrs:{cols:"1"}},[n("i",{staticClass:"fas fa-angle-left"})])],1)],1),e._l(e.localCredentials,(function(t,r){return n("CredentialListItem",{key:r,attrs:{credential:t},on:{onClickCredential:function(){return e.toggleCred(r)}}})}))],2)},je=[],ke=n("2ef0"),xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"credential-list-item"},[n("div",{staticClass:"credential-list-item__bar py-3",on:{click:e.onClickCredential}},[n("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{cols:"5"}},[e._v(e._s(e.credential.name))]),n("b-col",{attrs:{cols:"3"}},[e._v(e._s(e._f("format")(e.credential.updatedAt,"DD-MM-YYYY HH:mm")))]),n("b-col",{attrs:{cols:"3"}},[e._v(e._s(e._f("format")(e.credential.createdAt,"DD-MM-YYYY HH:mm")))]),n("b-col",{attrs:{cols:"1"}},[e.credential.open?n("i",{staticClass:"fas fa-angle-down"}):n("i",{staticClass:"fas fa-angle-left"})])],1)],1)],1),n("b-collapse",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"credential-list-item__collapsable-area"},[e.isEdit?n("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveUpdatedCredential(t)}}},[n("CredentialForm",{attrs:{credential:e.newCredential,processing:e.processing},on:{cancel:e.cancel,addField:e.addField,removeField:function(t){e.removeField(t)},onChangeFieldName:function(t,n){e.updateFieldName(t,n)},onChangeData:function(t,n){e.updateData(t,n)},onSelectTypeChange:function(t,n){e.updateType(t,n)}}})],1):e.credential.open?n("CredentialDetail",{staticClass:"credential-list-item__detail px-4 pt-4 pb-2",attrs:{open:e.credential.open,data:e.credential.data}}):e._e(),e.credential.open&&!e.isEdit?n("b-container",{staticClass:"credential-list-item__controls pb-4"},[n("b-row",{attrs:{"align-h":"between","align-v":"center"}},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{attrs:{variant:"danger",size:"sm",disabled:e.processing},on:{click:e.onClickDelete}},[e.processing?n("span",[n("b-spinner",{attrs:{small:"",label:"Spinning"}}),e._v("\n                Deleting...\n              ")],1):n("span",[n("i",{staticClass:"fas fa-trash-alt"})])])],1),n("b-col",{attrs:{cols:"auto"}},[n("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:e.onClickEdit}},[n("i",{staticClass:"fas fa-pencil-alt"}),e._v("\n              Edit\n            ")])],1)],1)],1):e._e()],1)])],1)},Ee=[],Be=(n("6b54"),n("3452")),Pe=n.n(Be),De=function(e,t){return Pe.a.AES.encrypt(JSON.stringify(e),t).toString()},Ne=function(e,t){var n=Pe.a.AES.decrypt(e,t);return JSON.parse(n.toString(Pe.a.enc.Utf8))},Fe=n("39ba"),$e=n("5843"),Le=n("01e3"),Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"credential-detail"},e._l(e.credentialDetailArray,(function(t,r){return n("CredentialField",{key:r,attrs:{field:t,index:r},on:{onToggleShowPass:e.onToggleShowPass}})})),1)},Te=[],Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"credential-field mb-3"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",{attrs:{"align-h":"between","align-v":"start","no-gutters":""}},[n("b-col",{attrs:{cols:"auto"}},[n("div",{staticClass:"credential-field__inputs d-flex"},[e.edit?n("div",{staticClass:"mr-2",attrs:{role:"group"}},[n("b-input",{staticClass:"credential-field__input-field-name",attrs:{size:"sm",value:e.fieldName,type:"text",readonly:e.readonly,placeholder:"Field Name",state:e.fieldNameValid,required:""},on:{keyup:function(t){e.onChangeFieldName(t)}}}),n("b-form-invalid-feedback",{staticClass:"credential-field__input-field-name-feedback",attrs:{id:"input-live-feedback"}},[e._v('\n              "'+e._s(e.fieldName)+'" field should not be duplicated\n            ')])],1):n("label",{staticClass:"mr-sm-2 credential-field__field-name-read",attrs:{for:"inline-form-input-"+e.index}},[e._v("\n              "+e._s(e.field.fieldName)+"\n          ")]),n("b-input",{ref:e.field.fieldName,staticClass:"mr-2 credential-field__data-field",attrs:{id:"inline-form-input-"+e.index,size:"sm",value:e.data,type:e.typeField,readonly:e.readonly,placeholder:"Insert "+e.fieldName},on:{keyup:function(t){e.onChangeData(t)}}}),e.edit?n("TypesSelect",{staticClass:"credential-field__type-select",attrs:{value:e.field.type},on:{onSelectTypeChange:e.onSelectTypeChange}}):e._e(),e.edit?e._e():n("div",{staticClass:"credential-field__controls-read"},[e.showEye?n("b-button",{staticClass:"credential-field__reveal-data-btn",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(){e.onClickEye(e.index)}}},[e.field.show?n("i",{staticClass:"fas fa-eye-slash"}):n("i",{staticClass:"fas fa-eye"})]):e._e(),n("b-button",{staticClass:"credential-field__copy-btn",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(){e.onCopy(e.field.fieldName,e.index)}}},[n("i",{staticClass:"far fa-copy"})]),"email"===e.field.type?n("b-button",{staticClass:"credential-field__email-btn",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(){e.sendEmail()}}},[n("i",{staticClass:"far fa-envelope"})]):"address"===e.field.type?n("b-button",{staticClass:"credential-field__address-btn",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(){e.searchMap()}}},[n("i",{staticClass:"far fa-map"})]):"url"===e.field.type?n("b-button",{staticClass:"credential-field__url-btn",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(){e.openAddress()}}},[n("i",{staticClass:"fas fa-external-link-alt"})]):e._e(),e.copied?n("span",[e._v("Copied!")]):e._e()],1)],1)]),e.edit?n("b-col",{attrs:{cols:"auto"}},[n("div",{staticClass:"credential-field__controls-read"},[e.minusButton?n("b-button",{staticClass:"credential-field__remove-btn",attrs:{pill:"",variant:"outline-danger",size:"sm"},on:{click:e.onClickRemove}},[n("i",{staticClass:"fas fa-minus"})]):e._e(),e.plusButton?n("b-button",{staticClass:"credential-field__add-btn",attrs:{pill:"",variant:"outline-success",size:"sm"},on:{click:e.onClickAdd}},[n("i",{staticClass:"fas fa-plus"})]):e._e()],1)]):e._e()],1)],1)],1)},Ue=[],ze=n("3010"),Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-select",{attrs:{size:"sm",options:e.options},on:{change:e.onSelectTypeChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},qe=[],Me=n("8361"),Je={label:"User Name",value:"userName"},Ye={label:"Password",value:"password"},Ve={label:"Text",value:"text"},He={label:"Long Text",value:"longText"},Ge={label:"Url",value:"url"},Ke={label:"Address",value:"address"},Qe={label:"Email",value:"email"},We=[Je,Ye,Ve,He,Ge,Ke,Qe],Xe={created:function(){this.options=We.map((function(e){return{value:e.value,text:e.label}}))},data:function(){return{selected:this.value,options:[]}},methods:{onSelectTypeChange:function(){this.$emit("onSelectTypeChange",this.selected)}},props:{value:{required:!0,type:String}},components:{BFormSelect:Me["a"]}},Ze=Xe,et=Object(c["a"])(Ze,Ie,qe,!1,null,null,null),tt=et.exports,nt={data:function(){return{copied:!1}},computed:{readonly:function(){return!this.edit},typeField:function(){return"boolean"===typeof this.field.show?this.field.show?"text":"password":"text"},fieldName:function(){return this.field.fieldName},data:function(){return this.field.data},showEye:function(){return"userName"===this.field.type||"password"===this.field.type}},methods:{onClickEye:function(e){this.$emit("onToggleShowPass",e)},onCopy:function(e,t){var n=this;this.$emit("onToggleShowPass",t),this.$nextTick((function(){n.$refs[e].select()})),this.$nextTick((function(){document.execCommand("copy")})),this.$nextTick((function(){n.$emit("onToggleShowPass",t)})),this.copied=!0,setTimeout((function(){n.copied=!1}),1e3)},sendEmail:function(){window.location.href="mailto:".concat(this.data)},openAddress:function(){window.open("http://".concat(this.data),"_blank")},searchMap:function(){window.open("https://www.google.com/maps/search/".concat(this.data),"_blank")},onChangeFieldName:function(e){this.$parent.$emit("onChangeFieldName",e.target.value,this.index)},onChangeData:function(e){this.$parent.$emit("onChangeData",e.target.value,this.index)},onSelectTypeChange:function(e){this.$parent.$emit("onSelectTypeChange",e,this.index)},onClickRemove:function(){this.$parent.$emit("removeField",this.index)},onClickAdd:function(){this.$parent.$emit("addField")}},props:{field:{required:!0,type:Object},index:{required:!0},edit:{type:Boolean,default:!1},plusButton:{required:!1,default:!1},minusButton:{required:!1,default:!0},fieldNameValid:{required:!1,default:!0}},components:{BButton:T["a"],"b-input":U["a"],TypesSelect:tt,BContainer:s["a"],BRow:b["a"],BCol:w["a"],BFormInvalidFeedback:ze["a"]}},rt=nt,at=(n("5cd8"),Object(c["a"])(rt,Ae,Ue,!1,null,null,null)),it=at.exports;function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){Object(X["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt={created:function(){this.masterp=R()("masterp"),this.credentialDetail=Ne(this.data,this.masterp);var e=this.credentialDetail.map((function(e){return"userName"===e.type||"password"===e.type?ot({},e,{show:!1}):e}));this.credentialDetailArray=Object(be["a"])(e)},data:function(){return{credentialDetail:{},credentialDetailArray:[],masterp:null}},methods:{onToggleShowPass:function(e){var t=Object(be["a"])(this.credentialDetailArray);t[e].show=!t[e].show,this.credentialDetailArray=Object(be["a"])(t)}},beforeDestroy:function(){this.credentialDetail=De(this.credentialDetail,this.masterp)},props:{open:{required:!0,type:Boolean},data:{required:!0,type:String}},components:{CredentialField:it}},ct=lt,ut=Object(c["a"])(ct,Re,Te,!1,null,null,null),dt=ut.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"credential-form"},[n("div",{staticClass:"credential-form__box mb-4"},[n("b-input",{staticClass:"credential-form__credential-name ml-3 mb-3",attrs:{size:"sm",placeholder:"Enter a name",required:""},model:{value:e.credential.name,callback:function(t){e.$set(e.credential,"name",t)},expression:"credential.name"}}),e._l(e.credential.fields,(function(e,t){return n("CredentialField",{key:t,attrs:{field:e,index:t,edit:!0,fieldNameValid:e.valid,plusButton:e.plusButton,minusButton:e.minusButton}})})),n("b-container",{staticClass:"credential-form__controls mt-4"},[n("b-row",{attrs:{"align-h":"end","align-v":"start","no-gutters":""}},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{staticClass:"credential-form__cancel-btn mr-2",attrs:{variant:"default",size:"sm"},on:{click:e.onClickCancel}},[e._v("\n            Cancel\n          ")]),n("b-button",{attrs:{variant:"primary",size:"sm",disabled:e.processing,type:"submit"}},[e.processing?n("span",[n("b-spinner",{attrs:{small:"",label:"Spinning"}}),e._v("\n              Saving...\n            ")],1):n("span",[n("i",{staticClass:"fas fa-save"}),e._v(" Save\n            ")])])],1)],1)],1)],2)])},ft=[],mt={props:{credential:{required:!0,type:Object},processing:{type:Boolean,default:!1}},methods:{onClickCancel:function(){this.$emit("cancel")}},directives:{"b-toggle":Fe["a"]},components:{CredentialField:it,BContainer:s["a"],BRow:b["a"],BCol:w["a"],BButton:T["a"],"b-input":U["a"],BSpinner:Le["a"]}},ht=mt,bt=(n("cbcd"),Object(c["a"])(ht,pt,ft,!1,null,"73e87294",null)),vt=bt.exports,gt={methods:{updateFieldName:function(e,t){var n=Object(ke["cloneDeep"])(this.newCredential);n.fields[t].fieldName=e,this.newCredential=n,this.checkValidFieldName()},updateData:function(e,t){var n=Object(ke["cloneDeep"])(this.newCredential);n.fields[t].data=e,this.newCredential=n},updateType:function(e,t){var n=Object(ke["cloneDeep"])(this.newCredential);n.fields[t].type=e,this.newCredential=n},checkValidFieldName:function(){var e=Object(ke["cloneDeep"])(this.newCredential),t=Object(ke["cloneDeep"])(e.fields);t.forEach((function(e){var n=t.filter((function(t){return""!==t.fieldName&&t.fieldName===e.fieldName})).length;e.valid=!(n>1)&&null})),e.fields=t,this.newCredential=e},removeField:function(e){var t=Object(ke["cloneDeep"])(this.newCredential),n=Object(ke["cloneDeep"])(t.fields);n.splice(e,1),t.fields=n,this.newCredential=t},addField:function(){var e=Object(ke["cloneDeep"])(this.newCredential);e.fields=[].concat(Object(be["a"])(e.fields),[{fieldName:"",data:"",type:"text",valid:null}]),this.newCredential=e},cleanFields:function(){var e=Object(ke["cloneDeep"])(this.newCredential.fields);return e.map((function(e){return delete e["valid"],delete e["plusButton"],delete e["minusButton"],e}))}},watch:{fieldLength:function(e){if(e){var t=Object(ke["cloneDeep"])(this.newCredential),n=Object(ke["cloneDeep"])(t.fields);n.forEach((function(e){e.plusButton=!1,e.minusButton=!0})),n[e-1].plusButton=!0,1===e&&(n[0].minusButton=!1),t.fields=n,this.newCredential=t}}},computed:{fieldLength:function(){return this.newCredential.fields?this.newCredential.fields.length:0}}};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){Object(X["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yt={mixins:[gt],data:function(){return{isEdit:!1,newCredential:{},credentialState:_e.state,visible:!1,decrypted:!1}},props:{credential:{required:!0,type:Object}},methods:{cancel:function(){this.isEdit=!1},onClickCredential:function(){this.$emit("onClickCredential")},onClickEdit:function(){this.isEdit=!0},buildNewCredential:function(e){var t=R()("masterp"),n=Object(ke["cloneDeep"])(e);n.data=Ne(n.data,t);var r={id:n._id,name:n.name,fields:n.data.map((function(e){return wt({},e,{valid:null,minusButton:!0,plusButton:!1})}))};return r.fields[r.fields.length-1].plusButton=!0,1===r.fields.length&&(r.fields[0].minusButton=!1),r},saveUpdatedCredential:function(){var e=this,t=R()("masterp"),n={name:this.newCredential.name,data:De(this.cleanFields(),t)};_e.updateCredential(n,this.newCredential.id).then((function(){e.cancel()}))},onClickDelete:function(){_e.deleteCredential(this.credential._id)}},computed:{processing:function(){return this.credential._id===this.credentialState.credentialStatus.id}},watch:{isEdit:function(e){e&&(this.newCredential=this.buildNewCredential(this.credential))},credential:function(){var e=this;this.$nextTick((function(){e.visible=e.credential.open}))},visible:function(e){!1===e&&(this.isEdit=!1)}},directives:{"b-toggle":Fe["a"]},components:{BCollapse:$e["a"],BContainer:s["a"],BRow:b["a"],BCol:w["a"],CredentialDetail:dt,BButton:T["a"],BForm:A["a"],CredentialForm:vt,BSpinner:Le["a"]}},Ot=yt,_t=(n("6e96"),Object(c["a"])(Ot,xe,Ee,!1,null,null,null)),St=_t.exports;function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Object(X["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt={data:function(){return{localCredentials:[]}},props:{credentials:{type:Array,required:!0}},created:function(){this.buildLocalCredentials()},watch:{credentials:function(e){e&&this.buildLocalCredentials()}},methods:{buildLocalCredentials:function(){var e=Object(ke["cloneDeep"])(this.credentials);this.localCredentials=e.map((function(e){return kt({},e,{open:!1})}))},toggleCred:function(e){var t=Object(ke["cloneDeep"])(this.localCredentials);this.localCredentials=t.map((function(t,n){return e===n&&(t.open=!t.open),t}))}},components:{CredentialListItem:St,BContainer:s["a"],BRow:b["a"],BCol:w["a"]}},Et=xt,Bt=(n("19d7"),Object(c["a"])(Et,Se,je,!1,null,null,null)),Pt=Bt.exports,Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"create-credential"},[n("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveCredential(t)}}},[n("CredentialForm",{attrs:{credential:e.newCredential,processing:e.processing},on:{cancel:e.cancel,addField:e.addField,removeField:function(t){e.removeField(t)},onChangeFieldName:function(t,n){e.updateFieldName(t,n)},onChangeData:function(t,n){e.updateData(t,n)},onSelectTypeChange:function(t,n){e.updateType(t,n)}}})],1),n("h4",{staticClass:"create-credential__title-backup ml-3 mb-3"},[e._v("Credentials")])],1)},Nt=[],Ft={fieldName:"User",data:"",type:Je.value},$t={fieldName:"Password",data:"",type:Ye.value};Ve.value,He.value,Ge.value,Ke.value,Qe.value;function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Object(X["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt={mixins:[gt],data:function(){return{newCredential:{name:"",fields:[Rt({},Ft,{valid:null,minusButton:!0,plusButton:!1}),Rt({},$t,{valid:null,minusButton:!0,plusButton:!0})]},edit:!0,credentialState:_e.state}},methods:{cancel:function(){this.$emit("cancelCreate")},saveCredential:function(){var e=this,t=R()("masterp"),n={name:this.newCredential.name,data:De(this.cleanFields(),t)};_e.createCredential(n).then((function(){e.$emit("onCredCreated")}))}},computed:{processing:function(){return this.credentialState.credentialStatus.processing}},components:{BForm:A["a"],CredentialForm:vt}},At=Tt,Ut=Object(c["a"])(At,Dt,Nt,!1,null,null,null),zt=Ut.exports,It={created:function(){_e.getCredentials()},data:function(){return{credentialState:_e.state,openNewCredential:!1}},computed:{credentials:function(){return this.credentialState.credentials},errorCredentials:function(){return this.credentialState.errorCredentials},loadingCredentials:function(){return this.credentialState.loadingCredentials}},directives:{"b-toggle":Fe["a"]},components:{CredentialsList:Pt,CreateCredential:zt,BContainer:s["a"],BRow:b["a"],BCol:w["a"],BButton:T["a"],BCollapse:$e["a"]}},qt=It,Mt=(n("b985"),Object(c["a"])(qt,me,he,!1,null,null,null)),Jt=Mt.exports;r["a"].use(f["a"]);var Yt=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=!!ce.state.user.token,!a){e.next=5;break}r(),e.next=21;break;case 5:if(i=sessionStorage.getItem("vault"),s=i&&JSON.parse(i).token,!s){e.next=20;break}return e.prev=8,e.next=11,ce.fetchUser(s);case 11:r(),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](8),sessionStorage.removeItem("vault"),r("/login");case 18:e.next=21;break;case 20:r("/login");case 21:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Vt=function(e,t,n){var r=sessionStorage.getItem("vault"),a=r&&JSON.parse(r).token;a?n(t.path):n()},Ht=[{path:"/",component:E,beforeEnter:function(e,t,n){"/"===e.path?n("/dashboard"):n()},children:[{name:"login",path:"/login",component:fe,beforeEnter:Vt},{name:"dashboard",path:"/dashboard",component:Jt,beforeEnter:Yt}]}],Gt="/vault/",Kt=new f["a"]({mode:"history",base:Gt,routes:Ht}),Qt=n("5a0c"),Wt=n.n(Qt);r["a"].config.productionTip=!1,r["a"].filter("format",(function(e,t){return Wt()(e).format(t)})),new r["a"]({router:Kt,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("e332"),a=n.n(r);a.a},"5cd8":function(e,t,n){"use strict";var r=n("8a17"),a=n.n(r);a.a},"62fc":function(e,t,n){},"6a3a":function(e,t,n){},"6e96":function(e,t,n){"use strict";var r=n("3fbd"),a=n.n(r);a.a},"8a17":function(e,t,n){},b985:function(e,t,n){"use strict";var r=n("16a5"),a=n.n(r);a.a},c109:function(e,t,n){"use strict";var r=n("4738"),a=n.n(r);a.a},cbcd:function(e,t,n){"use strict";var r=n("6a3a"),a=n.n(r);a.a},e332:function(e,t,n){}});
//# sourceMappingURL=app.8c5a3d7d.js.map